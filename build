#/bin/bash!

#include the compiler path to this shell session. compile the program with make. copy the compiled image
#immediately to an sd card so it is ready for testing.

if [ "$1" = "boot" ]
then
    cp source_code/boot/binary_blob/bootcode.bin /media/tsrapnik/ODESSA
    cp source_code/boot/binary_blob/fixup.dat /media/tsrapnik/ODESSA
    cp source_code/boot/binary_blob/start.elf /media/tsrapnik/ODESSA
    if [ $? -eq 0 ]
    then
        echo "copy boot files to sd card."
    fi
else
    export PATH=$PATH:$(dirname $(dirname $PWD))/compilers/gcc-linaro-7.1.1-2017.08-x86_64_aarch64-linux-gnu/bin
    make $1

    if [ "$1" != "clean" ]
    then
        cp compiled_code/kernel8.img /media/tsrapnik/ODESSA
        if [ $? -eq 0 ]
        then
            echo "copy image to sd card."
        fi
    fi
fi